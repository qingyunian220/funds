# 基金数据分析系统项目文档

## 项目概述

本项目是一个基金数据分析系统，主要功能包括爬取基金数据、分析基金风格因子、获取基金规模和持有人结构信息、展示基金超额收益排名等。系统采用Python作为后端语言，Flask作为Web框架，前端使用Layui框架构建用户界面。

## 核心功能模块

### 1. 数据爬取与处理模块

#### 1.1 基金风格因子提取 (complete_fund_style_extraction.py)
- 通过Selenium自动化工具访问韭菜说网站获取基金风格因子数据
- 提取基金的持股风格数据，包括市值、成长、盈利、价值等维度
- 获取股票持仓信息，特别是前十大重仓股占比
- 支持多只基金数据的同时提取
- 实现数据缓存机制，避免重复爬取

#### 1.2 基金规模与持有人结构爬取 (fund_data_processor.py)
- 爬取天天基金网获取基金规模数据
- 获取基金持有人结构信息，包括机构持有比例等
- 支持A/C类基金数据的聚合处理
- 实现数据缓存机制，减少重复请求

#### 1.3 私募排排网数据爬取 (simuwang_browser_stable.py)
- 自动登录私募排排网
- 获取基金的回撤数据和区间收益数据
- 提取超额收益等关键指标

#### 1.4 韭圈儿基金数据处理 (jiuquan_fund.py)
- 专门处理韭圈儿网站的基金数据
- 主要获取基金换手率信息

### 2. Web服务模块 (app.py)

#### 2.1 前端页面
- 首页(index.html)：展示系统三大功能模块
- 基金详情页(fund.html)：展示基金详细数据
- 基金排名页(fund_ranking.html)：展示基金超额收益排名

#### 2.2 后端API接口
- `/`：首页路由
- `/fund`：基金详情页路由
- `/fund_ranking`：基金排名页路由
- `/api/fund_data`：提供基金JSON数据接口
- `/get_fund_data`：提供基金Excel数据分页接口

### 3. 数据处理与分析模块

#### 3.1 基金风格因子对比 (complete_fund_style_extraction.py)
- 将基金风格因子与指数风格因子进行对比
- 找出与基金风格最接近的指数作为参考基准

#### 3.2 基金数据聚合 (fund_data_processor.py)
- 聚合A/C类基金的规模数据
- 计算加权平均的持有人结构数据

### 4. 定时任务模块 (main.py)

#### 4.1 自动数据更新
- 每日定时执行基金数据更新任务
- 更新基金风格因子、规模、持有人结构等信息
- 支持程序启动时立即执行一次更新

## 数据源

1. 韭菜说网站：基金风格因子数据
2. 天天基金网：基金规模和持有人结构数据
3. 私募排排网：基金回撤和超额收益数据
4. 韭圈儿网站：基金换手率数据

## 技术栈

- 后端：Python, Flask
- 前端：Layui, HTML, CSS, JavaScript
- 数据处理：Pandas, NumPy, Requests
- 爬虫：Selenium, Akshare
- 数据存储：JSON, Excel

## 系统特点

1. **多数据源整合**：从多个网站爬取基金数据并整合分析
2. **自动化更新**：支持定时任务自动更新基金数据
3. **数据缓存机制**：避免重复爬取，提高系统效率
4. **可视化展示**：通过Web界面直观展示基金数据
5. **超额收益分析**：重点分析基金相对于基准指数的超额收益
6. **风格因子对比**：通过风格因子分析基金与指数的相似度

## 使用场景

1. 基金研究与筛选
2. 基金业绩评估与对比
3. 指数增强基金跟踪
4. 基金投资决策支持

## 安全机制

1. 前端访问控制：通过密令机制限制页面访问
2. 数据缓存：减少对外部网站的请求频率
3. 异常处理：完善的错误处理机制保证系统稳定性